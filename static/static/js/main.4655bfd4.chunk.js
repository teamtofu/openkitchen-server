(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{207:function(e,t,a){e.exports={h1:"_2ffd6",h2:"bd137",h3:"_2082d",h4:"_3829a",h5:"_81ab7",small:"_52fc5",container:"_4a4d9",row:"bf7d5","col-6":"_2400d","col-12":"_86b19","col-sm-6":"_368f5","col-md-4":"_9b7b8","col-lg-3":"_87a2c","col-lg-5":"ce0f9","col-lg-7":"_03276","form-control":"_0c844",btn:"_002e6",focus:"_1fc74",disabled:"bbf0d","btn-secondary":"_989e5",active:"a7165","btn-success":"_31763","btn-info":"_5e27e","btn-danger":"_68e07","btn-light":"_68723","btn-dark":"cffd2","btn-outline-primary":"_9c36f","btn-outline-info":"_5467a","btn-outline-danger":"fcf82","btn-outline-dark":"d3d3d","btn-link":"b4048","btn-block":"d1db5",collapse:"_8bf41",show:"a95f8","btn-group":"_847b6","dropdown-toggle":"_37a45","input-group":"_54664","input-group-append":"_091ec",nav:"_6fbf2","nav-link":"_93167",navbar:"e74ab","navbar-brand":"_0b4ed","navbar-nav":"_04b51","navbar-collapse":"_71efe","navbar-toggler":"a64a3","navbar-toggler-icon":"_23ef6","navbar-expand-md":"_86803","navbar-light":"e2fb4",card:"_702f6","list-group":"_53c1b","list-group-item":"ffdf0","card-body":"ad2fc","card-title":"_8ed78","card-text":"_32d0b","card-img-top":"_5ab12",badge:"_41794","badge-dark":"e375c",jumbotron:"_567f0",alert:"_7264d","alert-info":"_1c601","alert-light":"d7131",progress:"_1484e","progress-bar":"_3813c","progress-bar-striped":"_080ef","list-group-flush":"b4867","list-group-item-secondary":"_26519",close:"_2fefc",modal:"_10e16","bg-info":"_6803f","bg-light":"dffa1","border-0":"b6cf5","border-secondary":"c2b76",rounded:"b6509","rounded-0":"_6fb09","d-none":"_48b3f","d-block":"d6ed3","h-auto":"_72fbb","mx-1":"d22bb","mt-2":"_48626","my-2":"_189c2","mb-2":"_8c4b5","my-3":"_8e83f","mb-3":"_5c8ef","p-0":"f17b5","py-1":"_909af","px-1":"_66ef5","py-2":"_8dec1","pb-2":"_9794d","pt-3":"f49f3","py-3":"_40c27","pb-4":"_8864b","mr-auto":"_05be6","mx-auto":"fa2bf","mt-md-0":"_3a9aa","mt-lg-0":"ce194","text-center":"f7a0a","font-weight-bold":"e93ef","text-muted":"_07843","progress-bar-stripes":"_744fc","spinner-border":"_5df36","spinner-grow":"_19315"}},213:function(e,t,a){e.exports=a(483)},461:function(e,t){},464:function(e,t,a){},465:function(e,t,a){},483:function(e,t,a){"use strict";a.r(t);a(214);var n=a(0),r=a.n(n),c=a(105),i=a.n(c),l=a(16),o=a(17),s=a(19),m=a(18),d=a(20),u=a(14),p=a(55),b=a(202),h=a.n(b),f=a(203),g=a.n(f),v=a(204),y=a.n(v),E=a(205),k=a.n(E),N=a(206),w=a.n(N),O=h.a.createStore([g.a,y.a,k.a],[w.a]),j=a(207),_=a.n(j),S={}.hasOwnProperty,C=function(){for(var e=[],t=0;t<arguments.length;t+=1){var a=arguments[t];if(a){var n=typeof a;if("string"===n||"number"===n)e.push(this&&this[a]||a);else if(Array.isArray(a))e.push(R.apply(this,a));else if("object"===n)for(var r in a)S.call(a,r)&&a[r]&&e.push(this&&this[r]||r)}}return e.join(" ").split(" ")},R=function(e){return e=e||[],function(){var t=C.apply(_.a,arguments);for(var a in e)t=C.apply(e[a],t);return t.join(" ")}},x=document.createElement("canvas");R.webp="no-webp",x.getContext&&x.getContext("2d")&&(R.webp=0===x.toDataURL("image/webp").indexOf("data:image/webp")?"webp":"no-webp");var D=R,I=D([]),M=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=new Date,t=e.getHours(),a=(O.get("plan")||{})["".concat(e.getMonth()+1,"-").concat(e.getDate(),"-").concat(e.getFullYear())],n=O.get("recipes")||{};return r.a.createElement("div",{className:I("container")},r.a.createElement("h2",{className:I("my-2")},t<12?"Good morning!":t<17?"Good afternoon!":"Good Evening!"," Let's get cooking."),r.a.createElement("div",{className:I("row","py-3")},a&&a.recipes[0]&&r.a.createElement("div",{className:I("col-12")},r.a.createElement("ul",{className:I("list-group","mb-3")},r.a.createElement("li",{className:I("list-group-item","list-group-item-secondary")},"On The Menu Today"),a.recipes.map(function(e,t){return n[e]?r.a.createElement("li",{className:I("list-group-item"),key:t},r.a.createElement(u.b,{to:"/recipe/"+e},n[e].name)):null}))),r.a.createElement("div",{className:I("col-12","col-sm-6","col-md-4")},r.a.createElement("div",{className:I("card","mb-2")},r.a.createElement("div",{className:I("card-body")},r.a.createElement("h5",{className:I("card-title")},"Grab a Recipe"),r.a.createElement("p",{className:I("card-text")},"Quickly add recipes by copying a link to the recipe and pasting it."),r.a.createElement(u.b,{to:"/recipes"},"Add a recipe")))),r.a.createElement("div",{className:I("col-12","col-sm-6","col-md-4")},r.a.createElement("div",{className:I("card","mb-2")},r.a.createElement("div",{className:I("card-body")},r.a.createElement("h5",{className:I("card-title")},"Make a Grocery List"),r.a.createElement("p",{className:I("card-text")},"Add items individually or import all of the ingredients from your favorite recipes."),r.a.createElement(u.b,{to:"/grocery-list"},"Add an ingredient")))),r.a.createElement("div",{className:I("col-12","col-sm-6","col-md-4")},r.a.createElement("div",{className:I("card","mb-2")},r.a.createElement("div",{className:I("card-body")},r.a.createElement("h5",{className:I("card-title")},"Plan Your Meals"),r.a.createElement("p",{className:I("card-text")},"Know what to buy and make ahead of time with this simple meal planner."),r.a.createElement(u.b,{to:"/meal-plan"},"Make your schedule"))))))}}]),t}(r.a.Component),A=a(81),T=a(210),L=a(65),U=a.n(L),W=a(106),P=a.n(W),F=function(e,t){var a=encodeURIComponent(Array.isArray(e)?"object"===typeof e[0]?e[0].url:e[0]:"object"===typeof e?e.url:e);return t?"https://proxy.duckduckgo.com/iu/?u=".concat(a,"&f=1"):"".concat("","/api/photoProxy?url=").concat(a)},G=function(e){var t=O.get("recipes")[e].recipeIngredient||[],a=O.get("list")||{};for(var n in t){var r={name:t[n],createdAt:(new Date).getTime(),id:Math.random().toString(36).split(".")[1],checked:!1,recipe:e};a[r.id]=r}O.set("list",a)},B=D([]),H=U()(void 0,{autoConnect:!1}),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).fetch=function(){a.state.url&&(H.emit("recipeUrl",a.state.url),a.setState({url:""}))},a.loadRecipes=function(){a.setState({recipes:O.get("recipes")||{}})},a.deleteRecipe=function(e){var t=O.get("recipes")||{};delete t[e],O.set("recipes",t),a.loadRecipes()},a.search=function(e){return new P.a(Object.values(a.state.recipes),{shouldSort:!0,threshold:.6,distance:100,maxPatternLength:20,minMatchCharLength:1,keys:[{name:"name",weight:.7},{name:"description",weight:.3}]}).search(e.substr(0,20))},a.state={url:"",recipes:O.get("recipes")||{},search:""},window.scrollTo(0,0),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;H.open(),H.on("recipe",function(t){var a=O.get("recipes")||{};t.createdAt=(new Date).getTime(),t.id=Math.random().toString(36).split(".")[1],a[t.id]=Object(T.a)({},{"@context":"http://schema.org","@type":"Recipe",cookTime:"P0Y0M0DT0H0M0.000S",image:"about:blank",keywords:"",name:"",description:"",prepTime:"P0Y0M0DT0H0M0.000S",recipeIngredient:[],recipeInstructions:[],totalTime:"P0Y0M0DT0H0M0.000S"},t),O.set("recipes",a),e.loadRecipes()}),H.on("recipeStatus",function(t){e.setState({status:t?"Unable to fetch recipe using that URL.":"All recipes found have been added."})})}},{key:"componentWillUnmount",value:function(){H.close()}},{key:"render",value:function(){var e=this,t=this.state,a=t.url,n=t.recipes,c=t.search,i=[];return c&&(i=this.search(c)),r.a.createElement("div",{className:B("container")},r.a.createElement("h1",{className:B("pt-3","pb-2")},"My Recipes"),r.a.createElement("div",{className:B("input-group","my-3")},r.a.createElement("input",{"aria-label":"Recipe URL",placeholder:"https://www.example.com/recipe",className:B("form-control"),type:"text",value:a,onChange:function(t){return e.setState({url:t.target.value})}}),r.a.createElement("div",{className:B("input-group-append")},r.a.createElement("div",{className:B("btn","btn-dark"),onClick:this.fetch},"Fetch"))),r.a.createElement("input",{"aria-label":"Recipe Search",placeholder:"Search your recipes...",className:B("form-control","my-3"),type:"text",value:c,onChange:function(t){return e.setState({search:t.target.value})}}),r.a.createElement("div",{className:B("row")},(c?i:Object.values(n).reverse()).map(function(t){return r.a.createElement("div",{key:t.id,className:B("col-12","col-sm-6","col-md-4","col-lg-3")},r.a.createElement("div",{className:B("card")},t.image&&r.a.createElement("img",{src:F(t.image),className:B("card-img-top"),alt:t.name,onError:function(e){return e.target.setAttribute("src",F(t.image,!0))}}),r.a.createElement("div",{className:B("card-body")},r.a.createElement("h5",{className:B("card-title")},t.name||"Recipe"),r.a.createElement("div",{className:B("my-2")},Object(A.a)(t.keywords?t.keywords.toUpperCase().split(",").slice(0,3):[]).map(function(e,t){return r.a.createElement("div",{key:t,className:B("badge","badge-dark","mx-1")},e.trim())})),r.a.createElement("div",{className:B("card-text","small")},t.description.replace("&nbsp;","").substr(0,300)||(t.description.length>300?"...":""))),r.a.createElement("div",{className:B("list-group","list-group-flush")},r.a.createElement("li",{className:B("list-group-item")},r.a.createElement(u.b,{to:"/recipe/"+t.id+"/"+encodeURIComponent(t.name.toLowerCase().replace(/\s+/g,"-")),className:B("btn-link")},r.a.createElement("div",{className:B("btn","btn-dark","btn-block")},"View Recipe"))),r.a.createElement("li",{className:B("list-group-item")},r.a.createElement("div",{className:B("btn","btn-info","btn-block"),onClick:function(){G(t.id),e.props.history.push("/grocery-list")}},"Add To Groceries")),r.a.createElement("li",{className:B("list-group-item")},r.a.createElement("div",{className:B("btn","btn-danger","btn-block"),onClick:function(){return e.deleteRecipe(t.id)}},"Delete")))))})))}}]),t}(r.a.Component),J=(a(464),D([])),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).deleteRecipe=function(){var e=O.get("recipes")||{};delete e[a.state.recipe.id],O.set("recipes",e),a.setState({recipe:null})},a.importIng=function(){G(a.state.recipe.id),a.props.history.push("/grocery-list")},a.state={recipe:(O.get("recipes")||{})[e.match.params.id],highlight:null},window.scrollTo(0,0),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.recipe;return t?r.a.createElement("div",null,r.a.createElement("div",{className:J("jumbotron","text-center","recipe-bg"),style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(".concat(F(t.image),")")}},r.a.createElement("h1",{className:J("my-2")},t.name)),r.a.createElement("div",{className:J("container")},r.a.createElement(u.b,{to:"/recipes",className:J("btn-link")},r.a.createElement("div",{className:J("btn","btn-outline-dark","btn-block")},"Return to Recipes")),r.a.createElement("div",{className:J("my-2")},Object(A.a)(t.keywords?t.keywords.toUpperCase().split(",").slice(0,3):[]).map(function(e,t){return r.a.createElement("div",{key:t,className:J("badge","badge-dark","mx-1")},e.trim())})),t.description&&r.a.createElement("div",{className:J("my-2")},t.description),t.recipeIngredient&&r.a.createElement("div",{className:J("my-2")},r.a.createElement("h3",null,"Ingredients"),r.a.createElement("ul",{className:J("list-group")},t.recipeIngredient.map(function(e,t){return r.a.createElement("li",{key:t,className:J("list-group-item","py-1","small")},e)})),r.a.createElement("div",{className:J("btn","btn-info","btn-block","my-2"),onClick:this.importIng},"Add to Groceries")),t.recipeInstructions&&r.a.createElement("div",{className:J("my-2")},r.a.createElement("h3",null,"Instructions"),Object(A.a)("HowToSection"===t.recipeInstructions[0]["@type"]?t.recipeInstructions:[t.recipeInstructions]).map(function(t,a){return r.a.createElement("ul",{className:J("list-group","my-2"),key:a},t.name&&r.a.createElement("li",{className:J("list-group-item","list-group-item-secondary")},t.name),(t.itemListElement||t).map(function(t,a){return r.a.createElement("li",{key:a,className:J("list-group-item","instruction","py-2",{"step-highlight":e.state.highlight===a}),onClick:function(){return e.setState({highlight:a})}},"object"===typeof t?t.text:t)}))})),r.a.createElement("a",{href:t.url||t.mainEntityOfPage||"#link-missing",target:"_blank",rel:"noopener noreferrer",className:J("btn-link")},r.a.createElement("div",{className:J("btn","btn-outline-info","btn-block","my-3")},"Original Recipe")),r.a.createElement(u.b,{to:"/recipes",className:J("btn-link")},r.a.createElement("div",{className:J("btn","btn-outline-dark","btn-block","my-3")},"Return to Recipes")),r.a.createElement("div",{className:J("btn","btn-outline-danger","btn-block","my-3"),onClick:this.deleteRecipe},"Delete Recipe"))):r.a.createElement(p.a,{to:"/recipes"})}}]),t}(r.a.Component),Q=a(56),q=a.n(Q),z=a(107),V=(a(465),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).el=document.createElement("div"),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.getElementById(this.props.root).appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.getElementById(this.props.root).removeChild(this.el)}},{key:"render",value:function(){return i.a.createPortal(this.props.children,this.el)}}]),t}(r.a.Component)),$=D([]),X=null,Z=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).importBarcode=Object(z.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(3).then(a.bind(null,487));case 2:return e.next=4,a.e(4).then(a.t.bind(null,486,7));case 4:X=(X=e.sent).default||X,console.log(X),alert("scan import"),X.onDetected(function(e){var t=e.codeResult.code;alert(t),X.stop()}),n.setState({scan:!0});case 10:case"end":return e.stop()}},e)})),n.scanBarcode=Object(z.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:X.init({inputStream:{type:"LiveStream",constraints:{width:{min:640},height:{min:480},facingMode:"environment",aspectRatio:{min:1,max:2}},singleChannel:!0},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,decoder:{readers:["upc_reader"]}},function(e){if(alert(e.message),e)return console.error(e);console.log("Starting"),X.start()});case 1:case"end":return e.stop()}},e)})),n.addItem=function(e){var t=O.get("list")||{},a={name:e,createdAt:(new Date).getTime(),id:Math.random().toString(36).split(".")[1],checked:!1};t[a.id]=a,O.set("list",t),n.setState({list:t,itemText:""})},n.removeItem=function(e){var t=O.get("list")||{};delete t[e],O.set("list",t),n.setState({list:t})},n.check=function(e){var t=O.get("list")||{};t[e].checked=!t[e].checked,O.set("list",t),n.setState({list:t})},n.flushList=function(){O.set("list",{}),n.setState({list:{}})},n.print=Object(z.a)(q.a.mark(function e(){var t;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,t){n.setState({printing:!0},function(){e()})});case 2:(t=document.getElementById("root")).setAttribute("style","display: none !important; opacity: 0 !important;"),window.print(),t.removeAttribute("style"),n.setState({printing:!1});case 7:case"end":return e.stop()}},e)})),n.state={list:O.get("list")||{},itemText:"",printing:!1,scan:!1},window.scrollTo(0,0),/(android|iphone|ipod|ipad)/i.test(navigator.userAgent)&&navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia&&n.importBarcode(),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.itemText,c=t.printing,i=t.scan;return r.a.createElement("div",{className:$("container")},r.a.createElement("h1",{className:$("my-3")},"Grocery List"),r.a.createElement(u.b,{to:"/recipes",className:$("btn-link")},r.a.createElement("div",{className:$("btn","btn-outline-dark","btn-block","my-3")},"Add Recipe Ingredients")),r.a.createElement("ul",{className:$("list-group","my-3","rounded-0")},Object.values(a).map(function(t,a){var n=t.name,c=t.id,i=t.checked;return r.a.createElement("li",{key:a,className:$("list-group-item","p-0","rounded-0")},r.a.createElement("div",{className:$("input-group")},r.a.createElement("div",{className:$("form-control","h-auto","border-0","rounded-0","list-text",{"text-strike":i,"bg-light":i}),onClick:function(){return e.check(c)}},n),r.a.createElement("div",{className:$("input-group-append")},r.a.createElement("div",{className:$("btn","btn-light","rounded-0"),onClick:function(){return e.removeItem(c)}},r.a.createElement("div",null,"Remove")))))})),r.a.createElement("div",{className:$("input-group")},r.a.createElement("input",{type:"text",className:$("form-control"),value:n,onChange:function(t){e.setState({itemText:t.target.value})}}),r.a.createElement("div",{className:$("input-group-append")},r.a.createElement("div",{className:$("btn","btn-dark"),onClick:function(){return e.addItem(n)}},"Add Item"))),i&&r.a.createElement("div",{className:$("btn","btn-dark","btn-block","my-2"),onClick:this.scanBarcode},"Scan Barcode"),r.a.createElement("div",{className:$("btn","btn-outline-primary","btn-block","my-2"),onClick:this.print},"Print"),r.a.createElement("div",{className:$("btn","btn-outline-danger","btn-block","my-2"),onClick:this.flushList},"Clear List"),c&&r.a.createElement(V,{root:"print-root"},r.a.createElement("h1",null,"Grocery List"),r.a.createElement("div",{className:$("row","my-2"),style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Symbol", "Noto Color Emoji"'}},Object.values(a).map(function(e,t){var a=e.name,n=(e.id,e.checked);return r.a.createElement("div",{key:t,className:$("col-6")},r.a.createElement("div",{className:$("my-2")},n?r.a.createElement("strike",null,"\u2611 ",a):r.a.createElement("span",null,"\u2610 ",a)))})),r.a.createElement("hr",null),r.a.createElement("h3",{className:$("my-2")},"Menu Elements"),r.a.createElement("ul",{className:$("my-2")},Object.values(a).reduce(function(e,t){return console.log(t.recipe,e),t.recipe&&-1===e.indexOf(t.recipe)&&e.push(t.recipe),e},[]).map(function(e,t){return r.a.createElement("li",{key:t,className:$("col-6")},O.get("recipes")[e].name)})),r.a.createElement("div",{className:$("d-block")},r.a.createElement("hr",null),r.a.createElement("small",{className:$("text-center","text-muted","pt-3")},"Made by Open Kitchen. MIT \xa9 2019 Russell Steadman. Generated on ",(new Date).getMonth()+1,"/",(new Date).getDate(),"."))),r.a.createElement("div",{id:"interactive",className:"viewport"}))}}]),t}(r.a.Component),ee=a(211),te=a.n(ee),ae=D([]),ne=U()(void 0,{autoConnect:!1}),re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setId=function(e){var t=new te.a({element:document.createElement("canvas"),value:"".concat(window.location.origin,"/sync/").concat(e),background:"white",foreground:"black",backgroundAlpha:1,foregroundAlpha:1,level:"M",mime:"image/png",size:192});a.setState({code:t.toDataURL(),id:e})},a.state={code:"about:blank",id:""},window.scrollTo(0,0),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;ne.open(),ne.on("connect",function(){console.log(ne.id),e.setId(ne.id)}),ne.on("syncRequest",function(e){console.log(e),ne.emit("syncData",e,{recipes:O.get("recipes"),list:O.get("list"),plan:O.get("plan")})})}},{key:"componentWillUnmount",value:function(){ne.close()}},{key:"render",value:function(){var e=this.state,t=e.code,a=e.id;return r.a.createElement("div",{className:ae("container")},r.a.createElement("h1",{className:ae("pt-3","pb-2")},"Sync"),r.a.createElement("img",{src:t,alt:"QR Code",height:192,width:192,style:{color:"transparent",width:"192px",height:"192px"},className:ae("mx-auto","text-center","d-block")}),r.a.createElement("div",{className:ae("form-control","my-2")},window.location.origin,"/sync/",a),r.a.createElement("div",{className:ae("alert","alert-info","my-3")},"Open the link or scan the QR Code on the other device to sync data from this device."))}}]),t}(r.a.Component),ce=D([]),ie=U()(void 0,{autoConnect:!1}),le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={id:e.match.params.id},window.scrollTo(0,0),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;ie.open(),ie.on("connect",function(){ie.emit("syncRequest",e.state.id)}),ie.on("syncData",function(t){for(var a in console.log(t),t)O.set(a,t[a]);e.props.history.push("/")})}},{key:"componentWillUnmount",value:function(){ie.close()}},{key:"render",value:function(){return r.a.createElement("div",{className:ce("container")},r.a.createElement("h1",{className:ce("pt-3","pb-2")},"Syncing..."),r.a.createElement("div",{className:ce("alert","alert-info","my-3")},"Just one second..."))}}]),t}(r.a.Component),oe=a(104),se=a(212),me=a.n(se),de=D([]),ue=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).search=function(e){return a.fuse.search(e.substr(0,20))},a.setRecipe=function(e){a.setState({recipe:e,search:""})},a.addRecipe=function(e){var t=a.state.recipe;if(t){var n=O.get("plan")||{};for(var r in e)a.state[e[r].dayId]&&-1!==e[r].rel&&(n[e[r].pkey]={id:e[r].pkey,recipes:(n[e[r].pkey]?n[e[r].pkey].recipes:[]).concat([t])});O.set("plan",n),a.setState({plan:n,search:"",recipe:"",su:!1,mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1})}},a.removeRecipe=function(e,t){var n=O.get("plan");n[e].recipes.splice(n[e].recipes.indexOf(t),1),O.set("plan",n),a.setState({plan:n})},a.mergeRecipeIng=function(e){var t=[];for(var n in e){var r=(a.state.plan[e[n].pkey]||{}).recipes||[];for(var c in r)-1===t.indexOf(r[c])&&t.push(r[c])}for(var i in t)G(t[i]);a.props.history.push("/grocery-list")},a.replaceRecipeIng=function(e){O.remove("list"),a.mergeRecipeIng(e)},a.state={plan:O.get("plan")||{},date:new Date,search:"",recipe:"",recipes:O.get("recipes")||{},su:!1,mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1};return a.fuse=new P.a(Object.values(a.state.recipes),{shouldSort:!0,threshold:.6,distance:100,maxPatternLength:20,minMatchCharLength:1,keys:[{name:"name",weight:.7},{name:"description",weight:.3}]}),window.scrollTo(0,0),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.plan,n=t.date,c=t.search,i=t.recipe,l=t.recipes,o=new Date,s=new Date(n);s.setDate(s.getDate()-s.getDay());var m=[];c&&(m=this.search(c));var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(function(e,t){var a=new Date(s);return a.setDate(a.getDate()+t),{name:e,abbr:e.substr(0,2),dayId:e.substr(0,2).toLowerCase(),rel:o.toDateString()===a.toDateString()?0:o>a?-1:1,two:"".concat(a.getMonth()+1,"/").concat(a.getDate()),pkey:"".concat(a.getMonth()+1,"-").concat(a.getDate(),"-").concat(a.getFullYear())}});return r.a.createElement("div",{className:de("container")},r.a.createElement("h1",{className:de("pt-3","pb-2")},"My Meal Plan"),r.a.createElement("div",{className:de("row")},r.a.createElement("div",{className:de("col-12","col-lg-5")},r.a.createElement("div",{className:de("d-block")},r.a.createElement(me.a,{className:de("mx-auto"),onChange:function(t){return e.setState({date:t})},value:n,calendarType:"US",minDetail:"month",minDate:new Date}))),r.a.createElement("div",{className:de("col-12","col-lg-7")},r.a.createElement("div",{className:de("my-3","mt-lg-0")},r.a.createElement("h3",null,"Week ",d[0].two,"-",d[6].two),r.a.createElement("hr",null),r.a.createElement("div",{className:de("pb-4")},r.a.createElement("label",{htmlFor:"select-recipe"},"Select a Recipe"),r.a.createElement("select",{id:"select-recipe",className:de("form-control","mb-3"),value:i,onChange:function(t){return e.setRecipe(t.target.value)}},r.a.createElement("option",null,"Select a Recipe"),Object.values(l).map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)})),r.a.createElement("label",{htmlFor:"search-recipe"},"Search Recipes"),r.a.createElement("input",{id:"search-recipe",type:"text",className:de("form-control","mb-3"),value:c,onChange:function(t){return e.setState({search:t.target.value})},placeholder:"Search Recipes"}),m[0]&&r.a.createElement("ul",{className:de("list-group","my-3")},m.slice(0,3).map(function(t,a){return r.a.createElement("li",{key:a,className:de("list-group-item"),onClick:function(){return e.setRecipe(t.id)}},t.name)})),r.a.createElement("label",{htmlFor:"day-list"},"Days to Add"),r.a.createElement("div",{className:de("btn-group","btn-block"),id:"day-list"},d.map(function(t,a){var n=t.abbr,c=t.dayId,i=t.rel;return r.a.createElement("div",{className:de("btn","px-1",{"btn-secondary":-1===i,"btn-success":e.state[c]&&-1!==i,"btn-danger":!e.state[c]&&-1!==i}),key:a,onClick:function(){return e.setState(Object(oe.a)({},c,!e.state[c]))}},n)})),r.a.createElement("div",{className:de("btn","btn-dark","btn-block","my-2"),onClick:function(){return e.setState({su:!1,mo:!0,tu:!0,we:!0,th:!0,fr:!0,sa:!1})}},"Select All Weekdays"),r.a.createElement("div",{className:de("btn","btn-info","btn-block","my-3"),onClick:function(){return e.addRecipe(d)}},"Add Recipe")),r.a.createElement("div",null,d.map(function(t,n){var c=t.name,i=t.two,o=t.pkey,s=t.rel,m=a[o]||{};return r.a.createElement("div",{key:n,className:de("my-2")},r.a.createElement("h4",{className:de({"font-weight-bold":0===s,"text-muted":-1===s})},c," (",i,")"),-1!==s?r.a.createElement("div",null,!(m.recipes||[])[0]&&r.a.createElement("div",{className:de("alert","alert-light","border-secondary")},r.a.createElement("b",null,"No recipes yet!")," Add them above."),(m.recipes||[]).map(function(t,a){var n=l[t];return r.a.createElement("div",{key:a,className:de("input-group","rounded-0")},r.a.createElement("div",{className:de("form-control","h-auto","rounded-0")},n.name),r.a.createElement("div",{className:de("input-group-append")},r.a.createElement("div",{className:de("btn","btn-danger","rounded-0"),onClick:function(){return e.removeRecipe(o,t)}},"Remove")))})):null)}),r.a.createElement("div",{className:de("btn-group","btn-block","my-3")},r.a.createElement("div",{className:de("btn","btn-light"),onClick:function(){return e.mergeRecipeIng(d)}},"Merge To Groceries"),r.a.createElement("div",{className:de("btn","btn-dark"),onClick:function(){return e.replaceRecipeIng(d)}},"Replace Groceries")))))))}}]),t}(r.a.Component),pe=D([]),be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).download=function(e){e.preventDefault();var t=new Blob([JSON.stringify({recipes:O.get("recipes"),list:O.get("list"),plan:O.get("plan"),version:1})],{type:"application/json"}),a=document.createElement("a");a.setAttribute("href",URL.createObjectURL(t)),a.setAttribute("download","my.ktcn"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},a.import=function(e){e.preventDefault(),a.importEl.current.click()},a.fileChange=function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=function(e){try{var t=JSON.parse(e.target.result);for(var a in t)"version"!==a&&O.set(a,t[a]);window.location.reload()}catch(n){console.error("Import Error",n)}},a.onerror=function(e){console.error("Import Error")}}},a.state={collapsed:!0},a.importEl=r.a.createRef(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.collapsed;return r.a.createElement("div",{className:pe("app")},r.a.createElement("header",null,r.a.createElement("nav",{className:pe("navbar","navbar-expand-md","navbar-light","bg-light")},r.a.createElement("button",{className:pe("navbar-toggler"),type:"button","aria-label":"Toggle navigation",onClick:function(){return e.setState({collapsed:!t})}},r.a.createElement("span",{className:pe("navbar-toggler-icon")})),r.a.createElement(u.b,{className:pe("navbar-brand"),to:"/"},"Open Kitchen"),r.a.createElement("div",{className:pe("collapse","navbar-collapse",{show:!t})},r.a.createElement("ul",{className:pe("navbar-nav","mr-auto","mt-2","mt-md-0")},r.a.createElement("li",{className:pe("nav-item")},r.a.createElement(u.b,{className:pe("nav-link"),to:"/recipes"},"Recipes")),r.a.createElement("li",{className:pe("nav-item")},r.a.createElement(u.b,{className:pe("nav-link"),to:"/grocery-list"},"Grocery List")),r.a.createElement("li",{className:pe("nav-item")},r.a.createElement(u.b,{className:pe("nav-link"),to:"/meal-plan"},"Meal Plan")))))),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/grocery-list",component:Z}),r.a.createElement(p.b,{path:"/recipe/:id",component:K}),r.a.createElement(p.b,{exact:!0,path:"/recipes",component:Y}),r.a.createElement(p.b,{exact:!0,path:"/sync",component:re}),r.a.createElement(p.b,{path:"/sync/:id",component:le}),r.a.createElement(p.b,{path:"/meal-plan",component:ue}),r.a.createElement(p.b,{component:M})),r.a.createElement("footer",{className:pe("container","text-center","py-3")},r.a.createElement("hr",null),r.a.createElement("div",{className:pe("my-2")},r.a.createElement("a",{href:"#download",onClick:this.download},"Download File")," \xb7 ",r.a.createElement("a",{href:"#import",onClick:this.import},"Import From File")," \xb7 ",r.a.createElement(u.b,{to:"/sync"},"Sync To Device")),r.a.createElement("input",{type:"file",className:pe("d-none"),ref:this.importEl,accept:".ktcn,application/json",onChange:this.fileChange}),r.a.createElement("div",null,"MIT \xa9 2019 Russell Steadman. Made with ",r.a.createElement("span",{role:"img","aria-label":"Heart"},"\u2764\ufe0f")," for my mama.")))}}]),t}(r.a.Component),he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(u.a,null,r.a.createElement(be,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");he?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):fe(t,e)})}}()}},[[213,1,2]]]);
//# sourceMappingURL=main.4655bfd4.chunk.js.map